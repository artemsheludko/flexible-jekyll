I"àØ<h1 id="purpose">Purpose</h1>

<p>The purpose of the Wireless Communication project (referred to in this report as
the ‚ÄúWC Project‚Äù) is to learn the essential skill of wireless communication
between Arduino boards, as well as reinforce time management and collaborative
skills.</p>

<p>The first skill acquired through the completion of the WC Project is the
essential skill of wireless communication between Arduino boards, which had not
been explored to date in the course. These basic wireless communication skills
have a wide range of applications for various more sophisticated projects.</p>

<p>The second skill reinforced through the completion of the WC Project is time
management and collaboration. The WC Project requires a partner to use his
Arduino and wireless module as the transmitter or receiver for communication.
Working on a project of this type with a partner adds a new layer of complexity
in terms of time management and collaboration skills needed in order to
successfully complete the project.</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Parts List</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">2 x 595 Shift Registers</td>
    </tr>
    <tr>
      <td style="text-align: center">LED Matrix Shield by E. Peterson</td>
    </tr>
    <tr>
      <td style="text-align: center">2 x NRF24L01 Wireless Modules</td>
    </tr>
    <tr>
      <td style="text-align: center">LED Bargraph</td>
    </tr>
  </tbody>
</table>

<h1 id="reference">Reference</h1>

<p><a href="http://mail.rsgc.on.ca/~ologush/WirelessLesson.html">Wireless Lesson</a></p>

<h1 id="procedure">Procedure</h1>

<p>The WC Project is made up of two unique circuits. The first circuit is the
transmitter, which consists of an Arduino connected to a wireless module. The
second circuit acts as the receiver, consisting of an Arduino, wireless module
and an LED Matrix Shield. However, the LED Matrix Shield designed by the
undersigned was not initially the display device. The initial display device was
an LED bar graph, which displayed the characters sent by the transmitter in
their binary form. Students were encouraged to improve the base circuit that
used a bar graph. The undersigned and his partner selected the LED Matrix Shield
to display the letters sent over wireless, as opposed to their binary
representation. With both circuits completed, Arduino code is used to set one
circuit as the transmitter and the other as the receiver, transmitting the data
by entering it into the serial monitor.</p>

<p><img src="../assets/img/WC/original.jpg" alt="First Breadboard Prototype" /></p>
<center><b>First Breadboard Prototype Circuit</b></center>

<p>The creation of the WC Project is split into 3 steps; building the demo circuit,
adding the bar graph display and serial input, and switching the bar graph to an
LED Matrix Shield display.</p>

<p>The first and simplest step in the construction of the WC Project was to build
the NRF24L01 demo circuit, which used two of the wireless modules to change the
brightness of an LED connected to the receiving Arduino using a potentiometer.
The code to complete this introduction was provided in class and served as a
basis for the code in the actual project.</p>

<p>The second step in the creation of the WC Project was to take user input on the
transmitter circuit and send it to the receiver side for purposes of display on
an LED bar graph. First, a 595 shift register was connected to the receiver
Arduino along with the LED bar graph. Once the bar graph was hooked up to the
receiver Arduino, the code had to be modified for both the transmitter and
receiver. The changes to the transmitter code were quite simple: rather than
collecting the input from a potentiometer using the <code class="highlighter-rouge">analogRead()</code> function, the
<code class="highlighter-rouge">Serial.read()</code> function was used to collect whatever character the user last
entered into the serial monitor. Since the value being transmitted to the
receiver Arduino is an ASCII character, that ASCII character has its own number
value, therefore making the display of the binary value of the character on the
bar graph very straightforward. The receiver code had to be modified to display
the binary value of the ASCII character on the bar graph using a single call to
the <code class="highlighter-rouge">shiftOut()</code> function built into the Arduino IDE used for transmitting data to
shift registers. Since each ASCII character has a number value, the received
character itself was simply passed into the <code class="highlighter-rouge">shiftOut()</code> function and shown on the
bar graph.</p>

<p><img src="../assets/img/WC/matrix-proto.jpg" alt="Breadboard Prototype" /></p>
<center><b>Breadboard Prototype with LED Matrix Shield Custom PCB</b></center>

<p>The third and most difficult step in building the WC Project was using an LED
matrix as the output device. Displaying the received character on the LED Matrix
Shield was very difficult at first. The shield was placed atop the Arduino Uno,
which acted as the receiver. The wireless module was then hooked up to the
female headers on the shield. After the addition of the shield, an issue arose
where no data at all could be transmitted between the Arduinos or displayed on
the LED matrix. Following a long period of arduous troubleshooting, it was
discovered that the pins used to drive the shift registers and LED matrix on the
shield are the same pins that were hard wired for the SPI protocol in the radio
library. This issue was circumvented by disconnecting the shield from the
Arduino and connecting different pins on the Arduino to the shift register pins
on the shield. Once the shield was properly set up, the ASCII value for each</p>

<p>letter in the alphabet had to be associated with a corresponding bitmap to be
displayed on the LED Matrix. For in-depth information on bitmaps and displaying
images on an LED matrix, refer to the TBMA project report in this document. The
undersigned‚Äôs partner, Jasper Schaffer, provided the bitmaps for every letter in
the alphabet, which were associated to their corresponding ASCII value using a
large switch case. A big switch case to handle the issue of matching ASCII
values with the correct bitmap was not the initial plan. Initially, the plan was
to save the bitmaps in EEPROM, however, each address in EEPROM only has space
for one byte while a bitmap for the LED matrix consists of 8 bytes. The idea was
to store each bitmap in the address that matched its ASCII value, which would
make collecting the correct bitmap for the received character very simple. Since
each bitmap would take up 8 slots in EEPROM, it was impossible to save a bitmap
at the correct address as that address would already be populated with the data
from another bitmap. For instance, the ASCII value of the character ‚ÄúA‚Äù is 65.
If the bitmap for ‚ÄúA‚Äù was saved at EEPROM address 65, address 66 (which is the
ASCII value for ‚ÄúB‚Äù) would already be overwritten with data from ‚ÄúA‚Äù. This
convenient model for collecting character bitmaps would only work with bitmaps
that occupy one byte of space. Once the switch case was completed, the matrix
would display the correct bitmap for the ASCII character received.</p>

<h1 id="media">Media</h1>

<p><a href="LINK HERE!">WC Project Video</a></p>

<h1 id="code">Code</h1>

<figure class="highlight"><pre><code class="language-c" data-lang="c"><span class="cp">#include &lt;nRF24L01.h&gt;
#include &lt;printf.h&gt;
#include &lt;RF24.h&gt;
#include &lt;RF24_config.h&gt;
</span>
<span class="cp">#define RECEIVER 1
#define TRANSMITTER 0
</span>
<span class="cp">#define clk A1
#define latch A0
#define data A2
#define shiftRegNum 2
#define shiftRegPinNum shiftRegNum * 8
</span>
<span class="n">byte</span> <span class="n">inputChar</span><span class="p">;</span>
<span class="n">byte</span> <span class="n">readChar</span><span class="p">;</span>
<span class="n">bool</span> <span class="n">radioNumber</span> <span class="o">=</span> <span class="n">RECEIVER</span><span class="p">;</span>

<span class="kt">uint8_t</span> <span class="n">received</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="kt">uint8_t</span> <span class="n">currentBitMap</span><span class="p">[</span><span class="mi">8</span><span class="p">];</span>
<span class="n">RF24</span> <span class="nf">radio</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span>

<span class="n">byte</span> <span class="n">addresses</span><span class="p">[][</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s">"1Node"</span><span class="p">,</span> <span class="s">"2Node"</span><span class="p">};</span>
<span class="n">bool</span> <span class="n">registers</span><span class="p">[</span><span class="n">shiftRegPinNum</span><span class="p">];</span>

<span class="k">const</span> <span class="kt">uint8_t</span> <span class="n">alphabet</span><span class="p">[][</span><span class="mi">8</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span> <span class="c1">// bit maps for every letter in the alphabet from A - Z</span>
<span class="p">{</span>
<span class="n">B00011000</span><span class="p">,</span>
<span class="n">B00100100</span><span class="p">,</span>
<span class="n">B00100100</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B01111110</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B01000010</span>
<span class="p">},{</span>
<span class="n">B11111000</span><span class="p">,</span>
<span class="n">B10000100</span><span class="p">,</span>
<span class="n">B10000100</span><span class="p">,</span>
<span class="n">B11111100</span><span class="p">,</span>
<span class="n">B10000100</span><span class="p">,</span>
<span class="n">B10000010</span><span class="p">,</span>
<span class="n">B10000010</span><span class="p">,</span>
<span class="n">B11111100</span>
<span class="p">},{</span>
<span class="n">B00111100</span><span class="p">,</span>
<span class="n">B01000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B01000000</span><span class="p">,</span>
<span class="n">B00111100</span>
<span class="p">},{</span>
<span class="n">B11111100</span><span class="p">,</span>
<span class="n">B10000010</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000010</span><span class="p">,</span>
<span class="n">B11111100</span>
<span class="p">},{</span>
<span class="n">B11111110</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B11111100</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B11111110</span>
<span class="p">},{</span>
<span class="n">B11111110</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B11111100</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span>
<span class="p">},{</span>
<span class="n">B01111111</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000110</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B01111110</span>
<span class="p">},{</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B11111111</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span>
<span class="p">},{</span>
<span class="n">B01111110</span><span class="p">,</span>
<span class="n">B00011000</span><span class="p">,</span>
<span class="n">B00011000</span><span class="p">,</span>
<span class="n">B00011000</span><span class="p">,</span>
<span class="n">B00011000</span><span class="p">,</span>
<span class="n">B00011000</span><span class="p">,</span>
<span class="n">B00011000</span><span class="p">,</span>
<span class="n">B01111110</span>
<span class="p">},{</span>
<span class="n">B11111111</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B01001000</span><span class="p">,</span>
<span class="n">B01001000</span><span class="p">,</span>
<span class="n">B00111000</span>
<span class="p">},{</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10001100</span><span class="p">,</span>
<span class="n">B10010000</span><span class="p">,</span>
<span class="n">B11100000</span><span class="p">,</span>
<span class="n">B10100000</span><span class="p">,</span>
<span class="n">B10010000</span><span class="p">,</span>
<span class="n">B10001000</span><span class="p">,</span>
<span class="n">B10000100</span>
<span class="p">},{</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000010</span><span class="p">,</span>
<span class="n">B11111110</span>
<span class="p">},{</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B11000011</span><span class="p">,</span>
<span class="n">B10100101</span><span class="p">,</span>
<span class="n">B10100101</span><span class="p">,</span>
<span class="n">B10100101</span><span class="p">,</span>
<span class="n">B10011001</span><span class="p">,</span>
<span class="n">B10011001</span><span class="p">,</span>
<span class="n">B10011001</span>
<span class="p">},{</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B11000001</span><span class="p">,</span>
<span class="n">B10100001</span><span class="p">,</span>
<span class="n">B10010001</span><span class="p">,</span>
<span class="n">B10001001</span><span class="p">,</span>
<span class="n">B10000101</span><span class="p">,</span>
<span class="n">B10000011</span><span class="p">,</span>
<span class="n">B10000001</span>
<span class="p">},{</span>
<span class="n">B00111100</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B00111100</span>
<span class="p">},{</span>
<span class="n">B11111000</span><span class="p">,</span>
<span class="n">B10000100</span><span class="p">,</span>
<span class="n">B10000100</span><span class="p">,</span>
<span class="n">B10000100</span><span class="p">,</span>
<span class="n">B11111000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span><span class="p">,</span>
<span class="n">B10000000</span>
<span class="p">},{</span>
<span class="n">B00111100</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B01000110</span><span class="p">,</span>
<span class="n">B01000010</span><span class="p">,</span>
<span class="n">B00111101</span>
<span class="p">},{</span>
<span class="n">B01111000</span><span class="p">,</span>
<span class="n">B01000100</span><span class="p">,</span>
<span class="n">B01000100</span><span class="p">,</span>
<span class="n">B01111000</span><span class="p">,</span>
<span class="n">B01100000</span><span class="p">,</span>
<span class="n">B01010000</span><span class="p">,</span>
<span class="n">B01001000</span><span class="p">,</span>
<span class="n">B01000100</span>
<span class="p">},{</span>
<span class="n">B00111110</span><span class="p">,</span>
<span class="n">B01000000</span><span class="p">,</span>
<span class="n">B01000000</span><span class="p">,</span>
<span class="n">B01111110</span><span class="p">,</span>
<span class="n">B00000010</span><span class="p">,</span>
<span class="n">B00000010</span><span class="p">,</span>
<span class="n">B00000010</span><span class="p">,</span>
<span class="n">B01111100</span>
<span class="p">},{</span>
<span class="n">B11111111</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span>
<span class="p">},{</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B01111110</span>
<span class="p">},{</span>
<span class="n">B01000001</span><span class="p">,</span>
<span class="n">B01000001</span><span class="p">,</span>
<span class="n">B01000001</span><span class="p">,</span>
<span class="n">B01000001</span><span class="p">,</span>
<span class="n">B00100010</span><span class="p">,</span>
<span class="n">B00100010</span><span class="p">,</span>
<span class="n">B00010100</span><span class="p">,</span>
<span class="n">B00001000</span>
<span class="p">},{</span>
<span class="n">B01000001</span><span class="p">,</span>
<span class="n">B01000001</span><span class="p">,</span>
<span class="n">B01000001</span><span class="p">,</span>
<span class="n">B01000001</span><span class="p">,</span>
<span class="n">B01001001</span><span class="p">,</span>
<span class="n">B01010101</span><span class="p">,</span>
<span class="n">B01010101</span><span class="p">,</span>
<span class="n">B00100010</span>
<span class="p">},{</span>
<span class="n">B11000011</span><span class="p">,</span>
<span class="n">B00100100</span><span class="p">,</span>
<span class="n">B00100100</span><span class="p">,</span>
<span class="n">B00011000</span><span class="p">,</span>
<span class="n">B00011000</span><span class="p">,</span>
<span class="n">B01100110</span><span class="p">,</span>
<span class="n">B10000001</span><span class="p">,</span>
<span class="n">B10000001</span>
<span class="p">},{</span>
<span class="n">B00100010</span><span class="p">,</span>
<span class="n">B00100010</span><span class="p">,</span>
<span class="n">B00010100</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00001000</span>
<span class="p">},{</span>
<span class="n">B11111111</span><span class="p">,</span>
<span class="n">B10000010</span><span class="p">,</span>
<span class="n">B00000100</span><span class="p">,</span>
<span class="n">B00001000</span><span class="p">,</span>
<span class="n">B00010000</span><span class="p">,</span>
<span class="n">B00100000</span><span class="p">,</span>
<span class="n">B01000001</span><span class="p">,</span>
<span class="n">B11111111</span>
<span class="p">}};</span>

<span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="c1">// put your setup code here, to run once:</span>
  <span class="n">radio</span><span class="p">.</span><span class="n">begin</span><span class="p">();</span> <span class="c1">// initialize radio and serial</span>
  <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span>
  <span class="c1">// Clear shift reg values on the shield</span>
  <span class="n">clearRegs</span><span class="p">();</span>
  <span class="n">writeRegs</span><span class="p">();</span>
  <span class="c1">// set shift register pins to output</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">latch</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">pinMode</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span>
  <span class="n">radio</span><span class="p">.</span><span class="n">setPALevel</span><span class="p">(</span><span class="n">RF24_PA_LOW</span><span class="p">);</span>
  <span class="n">radio</span><span class="p">.</span><span class="n">setChannel</span><span class="p">(</span><span class="mi">105</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">radioNumber</span> <span class="o">==</span> <span class="n">RECEIVER</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openWritingPipe</span><span class="p">(</span><span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openReadingPipe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openWritingPipe</span><span class="p">(</span><span class="n">addresses</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">openReadingPipe</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">addresses</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
  <span class="p">}</span>
  <span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">radioNumber</span> <span class="o">==</span> <span class="n">TRANSMITTER</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">stopListening</span><span class="p">();</span>
    <span class="n">readChar</span> <span class="o">=</span> <span class="n">readSerial</span><span class="p">();</span>
    <span class="c1">// attempt to write data and if the transmission fails print something</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">radio</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="o">&amp;</span><span class="n">readChar</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">)))</span> <span class="p">{</span>
      <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">"Failed"</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">startListening</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">radioNumber</span> <span class="o">==</span> <span class="n">RECEIVER</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">inputChar</span> <span class="o">=</span> <span class="n">readWireless</span><span class="p">();</span> <span class="c1">// read in received character if any</span>
    <span class="n">getChar</span><span class="p">(</span><span class="n">inputChar</span><span class="p">);</span>         <span class="c1">// get appropiate bitmap</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">inputChar</span><span class="p">);</span>  <span class="c1">// print received char</span>
    <span class="c1">// display bitmap placed in currentBitMap variable by getChar function</span>
    <span class="n">displayChar</span><span class="p">(</span><span class="n">currentBitMap</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">byte</span> <span class="nf">readSerial</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// reads in the character typed into the serial monitor</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">Serial</span><span class="p">.</span><span class="n">available</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">byte</span> <span class="n">charRead</span> <span class="o">=</span> <span class="n">Serial</span><span class="p">.</span><span class="n">read</span><span class="p">();</span> <span class="c1">// reads ASCII value of character typed</span>
    <span class="k">return</span> <span class="n">charRead</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">byte</span> <span class="nf">readWireless</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// reads in data received by the wireless module</span>
  <span class="n">byte</span> <span class="n">received</span><span class="p">;</span>
  <span class="k">while</span> <span class="p">(</span><span class="n">radio</span><span class="p">.</span><span class="n">available</span><span class="p">())</span> <span class="p">{</span>
    <span class="n">radio</span><span class="p">.</span><span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">received</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">uint8_t</span><span class="p">));</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">received</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">clearRegs</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// clears the registers array but does not write the changes</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">shiftRegPinNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">registers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">LOW</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// writes data in the registers array to the output pins of the shift registers</span>
<span class="kt">void</span> <span class="nf">writeRegs</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">latch</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">shiftRegPinNum</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span>
    <span class="kt">uint8_t</span> <span class="n">val</span> <span class="o">=</span> <span class="n">registers</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">val</span><span class="p">);</span>
    <span class="n">digitalWrite</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">digitalWrite</span><span class="p">(</span><span class="n">latch</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// function changes the value of an individual pin on the 595 by changing the</span>
<span class="c1">// value in the registers array where the change can be displayed later</span>
<span class="kt">void</span> <span class="nf">setRegPin</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">i</span><span class="p">,</span> <span class="kt">uint8_t</span> <span class="n">val</span><span class="p">)</span> <span class="p">{</span> <span class="n">registers</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span><span class="p">;</span> <span class="p">}</span>

<span class="c1">// this is taking place so fast that it looks as though all rows are being</span>
<span class="c1">// illuminated at the same time</span>
<span class="kt">void</span> <span class="nf">displayChar</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">charMap</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span> <span class="p">{</span>
  <span class="c1">// ensure column data is shown on the correct row by illuminating the current</span>
  <span class="c1">// one and making the previous one low</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="n">row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">row</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">setRegPin</span><span class="p">((</span><span class="n">row</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">setRegPin</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">uint8_t</span> <span class="n">col</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">col</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">charMap</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">&amp;</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="p">(</span><span class="mi">7</span> <span class="o">-</span> <span class="n">col</span><span class="p">)))</span> <span class="p">{</span>
        <span class="c1">// invert the bit because col pins must be low to be shown due to the</span>
        <span class="c1">// way the matrix is configured</span>
        <span class="n">setRegPin</span><span class="p">(</span><span class="mi">8</span> <span class="o">+</span> <span class="n">col</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">setRegPin</span><span class="p">(</span><span class="mi">8</span> <span class="o">+</span> <span class="n">col</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">setRegPin</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span> <span class="c1">// prevent same byte from being shown on two columns</span>
    <span class="p">}</span>
    <span class="n">writeRegs</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// copies matrix bitmaps from variable to currentBitMap var</span>
<span class="kt">void</span> <span class="nf">copy</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">from</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">currentBitMap</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">from</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// sets variable currentBitMap to the correct bitmap depending on the character</span>
<span class="c1">// received</span>
<span class="kt">void</span> <span class="nf">getChar</span><span class="p">(</span><span class="kt">uint8_t</span> <span class="n">input</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">switch</span> <span class="p">(</span><span class="n">input</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="sc">'A'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'B'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'C'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'D'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'E'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'F'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">5</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'G'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">6</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'H'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">7</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'I'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">8</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'J'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">9</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'K'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">10</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'L'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">11</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'M'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">12</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'N'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">13</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'O'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">14</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'P'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">15</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'Q'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">16</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'R'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">17</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'S'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">18</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'T'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">19</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'U'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">20</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'V'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">21</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'W'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">22</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'X'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">23</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'Y'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">24</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="sc">'Z'</span><span class="p">:</span>
    <span class="n">copy</span><span class="p">(</span><span class="n">alphabet</span><span class="p">[</span><span class="mi">25</span><span class="p">]);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h1 id="conclusion">Conclusion</h1>
<p>Overall, the WC Project allowed for the essential skills of wireless
communication, as well as time management and collaboration to be developed.
This project resulted in a final product that can be expanded upon into various
interesting projects in the future.</p>
:ET